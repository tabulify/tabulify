
- desc: 'Clean'
  task: clean
  target: sqlite

- desc: 'Load the users'
  task: load
  source: users.csv
  target: sqlite

- desc: 'Load the web events'
  task: load
  source: events.jsonl
  target: sqlite

- desc: 'Event Processing first pass'
  task: sql
  sql: events_1.sql
  source: sqlite
  target:
    dsn: sqlite
    name: events_1

- desc: 'Event Processing second pass'
  task: sql
  sql: events_2.sql
  source: sqlite
  target:
    dsn: sqlite
    name: events_2

- desc: 'User Processing'
  task: sql
  sql: users.sql
  source: sqlite
  target:
    dsn: sqlite
    name: users_1

- desc: 'Download analytics - Subscription started by month'
  task: load
  source:
    dsn: sqlite
    sql: analytics.sql
  target:
    dsn: file
    name: out/susbscription_started_by_month.csv
