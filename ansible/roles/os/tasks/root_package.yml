
#- name: 'Package - Upgrade all packages'
#  yum:
#    name=*
#    state=latest

- name: Package - Add the EPEL repository
  when: "ansible_distribution_major_version in [ 7, 8, 9 ] and ansible_os_family == 'RedHat'"
  yum_repository:
    name: epel
    description: EPEL YUM repo
    baseurl: https://dl.fedoraproject.org/pub/epel/$releasever/$basearch/
    gpgcheck: yes

- name: "Package - Adds the gpg key from the EPEL repo"
  rpm_key:
    state: present
    key: https://dl.fedoraproject.org/pub/epel/RPM-GPG-KEY-EPEL-7

- name: "Package - Install Utility Packages"
  yum:
    name:
      - jq
      - wget
      - bind-utils # dig
      - lsof # lsof (open file)
      - zip
      - unzip
      - sshpass
      - nmap # Added nmap to tbe able to scan the open port at the command line
      - sysstat # (for process monitoring and stat, pidstat)
      - bzip2 # to unzip bz2)
      - telnet
      - nc
      - whois
    enablerepo: epel
    state: present
